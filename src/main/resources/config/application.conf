# application.conf - Base configuration of the http service

# Common app settings
app {
  name = wealthpocket-server
  version = "0.1.0"
  environment = dev                     # use dev-environment by default
  environment = ${?APP_ENVIRONMENT}     # or override it
  full-name = ${app.name} " v" ${app.version} " ["${app.environment}"]"
}

# HTTP server configuration
server {
  host = "0.0.0.0"
  host = ${?SERVER_HOST}
  port = 8080
  port = ${?SERVER_PORT}
  timeout = 30s
  ssl.enabled = false
}

# Database configuration
database {
  type = mariadb
  host = localhost
  port = 3306
  db-name = wealthpocket-dev
  # db connection pool size
  pool-size = 10

  # !! CAUTION: never store credentials in files

  user = ${?DB_USER}            # provided by environment variable DB_USER
  password = ${?DB_PASSWORD}    # provided by environment variable DB_PASSWORD

  connection-timeout = 5s
}

# Logging configuration
logging {
  # Supported levels: DEBUG, INFO, WARN, ERROR
  level = "INFO"
  level = ${?LOG_LEVEL}

  # Configure log output settings
  file {
    enabled = true
    path = "/var/log/wealthpocket/app.log"
    path = ${?LOG_FILE_PATH}
    max-size = 50m      # maximum file-size ('m' = megabyte)
    max-history = 5     # maximum amount of log-files
  }
  console {
    enabled = true      # allow logging in the console parallel to logging in file
  }
}